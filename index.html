<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Shadow over Ragusa ‚Äî Mijo Radalj</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#0b0d12;--fg:#f3f5f7;--muted:#a7afbd;--card:#131722;--border:#262b36;--accent:#e6e8ee;--gold:#d6b980}
*{box-sizing:border-box}html,body{margin:0;background:var(--bg);color:var(--fg);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
h1,h2{font-family:'Playfair Display',serif;margin:.2rem 0 .75rem}
.container{max-width:1100px;margin:0 auto;padding:0 16px}
header{position:sticky;top:0;z-index:10;background:rgba(0,0,0,.35);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
header .row{display:flex;gap:12px;align-items:center;padding:10px 0}
nav a{color:inherit;text-decoration:none;padding:10px 14px;border-radius:12px;border:1px solid var(--border)}
.hero{position:relative;min-height:380px;display:flex;align-items:flex-end;overflow:hidden}
.hero img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:brightness(.9) blur(2px)}
.hero .veil{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.55),rgba(0,0,0,.05))}
.hero .content{position:relative;z-index:2;padding:24px;color:#fff}
section{padding:44px 0}
.grid{display:grid;grid-template-columns:1fr;gap:20px}
@media(min-width:900px){.grid.syn{grid-template-columns:340px 1fr;gap:24px}.grid.about{grid-template-columns:1.05fr 1fr;gap:24px}}
.card{background:var(--card);border:1px solid var(--border);border-radius:18px;padding:22px;box-shadow:0 12px 36px rgba(0,0,0,.25)}
.frame{display:inline-block;padding:0;border:1px solid var(--border);border-radius:18px;overflow:hidden;background:rgba(255,255,255,.02);line-height:0}
.book-cover{max-width:100%;max-height:65vh;object-fit:contain}
.caption{font-size:12px;color:var(--muted);margin-top:6px;text-align:center}
#synopsisText::first-letter{float:left;font-family:'Playfair Display',serif;font-size:3rem;line-height:.8;color:var(--gold);padding:8px 10px 0 0}
.author-box{width:100%;max-width:460px;height:560px;border:1px solid var(--border);border-radius:18px;overflow:hidden;background:rgba(255,255,255,.02);box-shadow:0 12px 32px rgba(0,0,0,.25);margin:auto}
.author-box img{width:100%;height:100%;object-fit:cover}
.hl-grid{display:grid;grid-template-columns:1fr;gap:16px}
@media(min-width:900px){.hl-grid{grid-template-columns:1fr 1fr}}
.hl-card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px}
.hl-head{display:flex;gap:10px;align-items:center;margin-bottom:8px}
.hl-icon{font-size:20px}.hl-title{font-family:'Playfair Display',serif;font-size:1.1rem}
.hl-list{margin:8px 0 0;padding-left:18px}.hl-list li{margin:4px 0}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;border-radius:12px;border:1px solid var(--border);background:var(--accent);color:#0b0d12;font-weight:600;cursor:pointer}
.btn.secondary{background:var(--card);color:var(--fg)}
footer{border-top:1px solid var(--border);color:var(--muted);font-size:14px;padding:28px 0}
/* Admin */
#adminBtn{position:fixed;bottom:18px;left:18px;z-index:50;background:#0f141f;color:#fff;border:1px solid var(--border);opacity:.9}
#adminPanel{position:fixed;inset:0;background:rgba(0,0,0,.75);display:none;z-index:60;align-items:center;justify-content:center;padding:16px}
#adminCard{width:min(980px,96vw);max-height:92vh;overflow:auto;background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.field{display:flex;flex-direction:column;gap:6px;min-width:220px;flex:1}
.field input[type=text],.field input[type=password]{background:rgba(255,255,255,.05);border:1px solid var(--border);color:var(--fg);border-radius:10px;padding:10px}
.bigUpload{display:flex;align-items:center;justify-content:center;flex-direction:column;gap:10px;border:2px dashed var(--border);border-radius:16px;padding:20px;background:rgba(255,255,255,.03);text-align:center}
.bigUpload input[type=file]{display:block}
#list{font-size:14px;max-height:200px;overflow:auto;margin-top:8px}
.pill{display:inline-block;border:1px solid var(--border);border-radius:999px;padding:6px 10px;margin:4px;background:rgba(255,255,255,.06)}
.note{font-size:12px;color:#c9ced8}
.ok{color:#71e6a0}.warn{color:#f6c05e}.err{color:#ff8a8a}
</style>
</head>
<body>
<header>
  <div class="container row">
    <strong style="font-family:'Playfair Display',serif">Shadow over Ragusa</strong>
    <nav style="margin-left:auto" class="row">
      <a href="#hero">Home</a>
      <a href="#synopsis">Synopsis</a>
      <a href="#about">About</a>
      <a href="#gallery">Gallery</a>
      <a href="#contact">Contact</a>
    </nav>
  </div>
</header>

<section id="hero" class="hero">
  <img id="heroCover" alt="Cover">
  <div class="veil"></div>
  <div class="content container">
    <h1>Shadow over Ragusa</h1>
    <p>A historical novel about the Republic of Ragusa ‚Äî how pure love endures under trial.</p>
  </div>
</section>

<section id="synopsis">
  <div class="container">
    <h2>Synopsis</h2>
    <div class="grid syn">
      <div>
        <div class="frame"><img id="synopsisCover" class="book-cover" alt="Book Cover"></div>
        <div class="caption">Front cover ‚Äî upload as <code>cover.jpg</code> or <code>cover.png</code> to the repo root.</div>
      </div>
      <div class="card" id="synopsisText" style="white-space:pre-wrap;">
Centuries ago on the Adriatic, the Republic of Ragusa (Dubrovnik) survives through diplomacy, trade, and the vigilance of its walls. As Venetian pressure mounts from the west, a quieter danger creeps within. Inside Villa Marin seat of a respected council family‚ÄîMaster of Keys Luka and the capable house steward Iva find themselves drawn into a web of secrets when a clandestine trip to Lokrum Island reveals a hidden launch, a golden chain, and a body concealed beneath broken boards. What begins as a troubling discovery becomes the first thread in a conspiracy stretching from monastery corridors to the council chamber itself.

The city‚Äôs political heart beats to ritual and ceremony: the Church speaks, the Admiralty counts ships and cannon, and the Council seeks balance under Duke Orlando. Yet beneath the music of garden soir√©es and the elegance of lantern-lit dinners, loyalties are tested. Father Marko‚Äôs pious counsel arrives with its own shadows; letters from powerful men beyond the sea urge alliances that would bind Ragusa‚Äôs hands; and whispers of red-cloaked figures stir fear along the walls. Luka‚Äôs watchful patience and Iva‚Äôs fierce, clear-eyed resolve become the Republic‚Äôs quiet instruments. Their investigation‚Äîcarried out between market stalls, harbor steps, and hidden chapels‚Äîuncovers links between the church, foreign agents, and smugglers using the coves around Lokrum.

Into this brightening storm sails Miho Lupina, a young officer whose sense of duty matches the city‚Äôs own. His arrival gives Iva a fragile counterweight to intrigue‚Äîand the novel a tender pulse of human hope. When a public assembly invites citizens to share responsibility for Ragusa‚Äôs fate, Miho‚Äôs vow to serve becomes a turning point that binds private feeling to civic sacrifice. Through him, the book asks what a free city requires of those who love it: discreet service, restraint, and, when the hour comes, courage.

Shadow over Ragusa braids mystery, romance, and civic drama into a portrait of a small republic standing tall among empires. Without revealing its final turns, the story carries Iva, Luka, and Miho from a single hidden crime toward revelations that test friendships, expose traitors, and clarify where faith, family, and freedom truly meet. Across stone alleys and sun-struck rooftops, the novel celebrates a city that survives by wit over force‚Äîand the people whose private loyalties make public liberty possible.
      </div>
    </div>
  </div>
</section>

<section id="highlights">
  <div class="container">
    <h2>Highlights ‚Äî Why this book is special</h2>
    <div class="hl-grid">
      <div class="hl-card"><div class="hl-head"><span class="hl-icon">üèõ</span><div class="hl-title">A Unique Historical Setting</div></div><ul class="hl-list"><li>A small but powerful maritime republic.</li><li>Diplomacy & survival between Venice and the Ottomans.</li><li>Architecture, customs, salt trade, noble families.</li></ul></div>
      <div class="hl-card"><div class="hl-head"><span class="hl-icon">‚ù§</span><div class="hl-title">A Love Story Built on Loyalty</div></div><ul class="hl-list"><li>Pure and true‚Äînot scandalous.</li><li>Tested by war, faith, politics.</li><li>Emotionally human, noble, timeless.</li></ul></div>
      <div class="hl-card"><div class="hl-head"><span class="hl-icon">üë©‚Äçü¶∞</span><div class="hl-title">A Strong Female Lead</div></div><ul class="hl-list"><li>Iva is brave, clever, principled.</li><li>Not royalty, yet central to history.</li><li>Acts rather than waits to be saved.</li></ul></div>
      <div class="hl-card"><div class="hl-head"><span class="hl-icon">‚öî</span><div class="hl-title">Epic Stakes, Human Hearts</div></div><ul class="hl-list"><li>Love & devotion amid espionage.</li><li>War, betrayal, faith, survival.</li><li>Diplomacy instead of conquest.</li></ul></div>
      <div class="hl-card"><div class="hl-head"><span class="hl-icon">üåç</span><div class="hl-title">Coexistence & Cultural Respect</div></div><ul class="hl-list"><li>East and West find understanding.</li><li>Conversion as sacrifice for peace.</li><li>Love across culture & empire.</li></ul></div>
      <div class="hl-card"><div class="hl-head"><span class="hl-icon">üè∞</span><div class="hl-title">Rich Worldbuilding & Atmosphere</div></div><ul class="hl-list"><li>Stone streets, villas, palaces, ports.</li><li>Constantinople‚Äôs courts & mosques.</li><li>Noble households and harbor life.</li></ul></div>
      <div class="hl-card"><div class="hl-head"><span class="hl-icon">üé≠</span><div class="hl-title">Multiple Compelling Characters</div></div><ul class="hl-list"><li>Luka and Lady Ana‚Äôs romance.</li><li>Venetian spies disguised as priests.</li><li>Lords Ivano and Vjeko‚Äôs decisions.</li></ul></div>
      <div class="hl-card"><div class="hl-head"><span class="hl-icon">üïä</span><div class="hl-title">Hope, Honor, and Legacy</div></div><ul class="hl-list"><li>Peace over tragedy.</li><li>Independence preserved.</li><li>Love rewarded after sacrifice.</li></ul></div>
    </div>
  </div>
</section>

<section id="about">
  <div class="container">
    <h2>About the Author</h2>
    <div class="grid about">
      <div class="author-box"><img id="authorImg" alt="Author photo"></div>
      <div class="card" id="bioText" style="white-space:pre-wrap;">
Mijo Radalj (born October 29, 1986) is a Croatian writer whose path to storytelling began during seasonal work as a tourist bus driver along the Adriatic coast. Listening to local guides tell versions of history that never reached the official books shaped by memory, rumor, and place sparked his fascination with untold stories. Before moving to Ireland, those seasons gave him a front row seat to temperaments and relationships that later inspired characters. What started as a light, just-for-fun idea grew into a full-length historical novel. Shadow over Ragusa is the result: a work born of lived experience and the spaces between history and myth.
      </div>
    </div>
  </div>
</section>

<section id="dedication">
  <div class="container">
    <h2>Dedication</h2>
    <div class="card" style="white-space:pre-wrap;">
To my late father. You warned me about my friends, and you were right. They are wild and crazy in the most beautiful ways one can imagine, but I do love them, and I‚Äôve been in good hands all along. Let this book stand as proof of that ‚Äî and of my love for you. Rest easy, my friend.
    </div>
  </div>
</section>

<section id="gallery">
  <div class="container">
    <h2>Gallery</h2>
    <div class="card" id="galleryCard">
      <p class="note">Click <b>Admin</b> (bottom-left), enter your key, then use the big <b>Upload images</b> button below.</p>
      <div id="thumbs" class="hl-grid"></div>
    </div>
  </div>
</section>

<section id="contact">
  <div class="container">
    <h2>Contact</h2>
    <div class="card">
      <button class="btn secondary" id="mailBtn">Write me</button>
      <p class="note">Opens your email app; address is not visible on the page.</p>
    </div>
  </div>
</section>

<footer>
  <div class="container" style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;">
    <div>¬© <span id="year"></span> Mijo Radalj</div>
    <div>Built with ‚ô• ‚Äî static site</div>
  </div>
</footer>

<!-- ADMIN -->
<button id="adminBtn" class="btn">Admin</button>
<div id="adminPanel">
  <div id="adminCard">
    <h2 style="margin:.2rem 0 .6rem">Admin ‚Äî Upload to Gallery</h2>
    <p class="note">Enter admin key, then choose images and click Upload. Images are pushed to your GitHub repository.</p>
    <div class="row">
      <div class="field">
        <label>Admin key</label>
        <input type="password" id="adminKey" placeholder="ragusa 1986">
      </div>
      <div class="field">
        <label>GitHub token (contents: read/write)</label>
        <input type="password" id="ghToken" placeholder="paste token once">
      </div>
    </div>
    <div class="bigUpload">
      <input type="file" id="fileInput" accept="image/*" multiple>
      <button class="btn" id="uploadBtn">Upload to Gallery</button>
      <div id="list"></div>
      <div id="status" class="pill">Waiting‚Ä¶</div>
    </div>
    <p class="note">Files will be named <code>gallery-N.ext</code> and <code>gallery.json</code> will be updated automatically.</p>
    <div class="row" style="margin-top:10px"><button class="btn secondary" id="closeAdmin">Close</button></div>
  </div>
</div>

<script>
document.getElementById('year').textContent = new Date().getFullYear();
document.getElementById('mailBtn').addEventListener('click',()=>{location.href='mailto:mijo.radalj@gmail.com?subject=Shadow%20over%20Ragusa';});

// Load cover/author images
const coverFiles=['cover.jpg','cover.png','cover.jpg.png'];
const authorFiles=['author.jpg','author.png','author.jpg.png','author%20.jpg.png'];
function tryLoad(el, arr){let i=0;const base=location.origin+'/';(function next(){if(i>=arr.length)return;el.onerror=()=>{i++;next();};el.src=base+arr[i];})();}
tryLoad(document.getElementById('heroCover'),coverFiles);
tryLoad(document.getElementById('synopsisCover'),coverFiles);
tryLoad(document.getElementById('authorImg'),authorFiles);

// Render thumbs (from gallery.json or numbered files)
const thumbs=document.getElementById('thumbs');
async function loadGallery(){
  let list=[];
  try{const r=await fetch('gallery.json',{cache:'no-store'});if(r.ok){const j=await r.json();list=(j.images||[]);} }catch(e){}
  // Fallback: numbered
  if(!list.length){for(let n=1;n<=200;n++){for(const ext of ['jpg','jpeg','png','webp']){const url=`gallery-${n}.${ext}`;const img=new Image();img.onload=()=>{list.push(url);render(list)};img.onerror=()=>{};img.src=url;}}}
  render(list);
}
function render(list){
  thumbs.innerHTML='';
  list.forEach(src=>{const d=document.createElement('div');d.className='hl-card';const i=document.createElement('img');i.src=src;i.style.width='100%';i.style.borderRadius='10px';d.appendChild(i);thumbs.appendChild(d);});
}
loadGallery();

// ADMIN
const ADMIN_PASS='ragusa 1986';
const adminBtn=document.getElementById('adminBtn');
const adminPanel=document.getElementById('adminPanel');
const closeAdmin=document.getElementById('closeAdmin');
const adminKey=document.getElementById('adminKey');
const ghToken=document.getElementById('ghToken');
const fileInput=document.getElementById('fileInput');
const uploadBtn=document.getElementById('uploadBtn');
const listEl=document.getElementById('list');
const statusEl=document.getElementById('status');

adminBtn.addEventListener('click',()=>{adminPanel.style.display='flex';});
closeAdmin.addEventListener('click',()=>{adminPanel.style.display='none';});

let files=[];
fileInput.addEventListener('change',()=>{files=[...fileInput.files];listEl.innerHTML=files.map(f=>`<span class='pill'>${f.name} (${Math.round(f.size/1024)} KB)</span>`).join('');});

function headers(token){return {'Authorization':'token '+token,'Accept':'application/vnd.github+json','Content-Type':'application/json'};}
async function listRoot(token){const r=await fetch('https://api.github.com/repos/shadowoverragusa/shadowoverragusa.github.io/contents?ref=main',{headers:headers(token)});if(!r.ok)throw new Error('List failed');return r.json();}
async function putFile(path,b64,msg,token,sha){const body={message:msg,content:b64,branch:'main'};if(sha)body.sha=sha;const r=await fetch('https://api.github.com/repos/shadowoverragusa/shadowoverragusa.github.io/contents/'+encodeURIComponent(path),{method:'PUT',headers:headers(token),body:JSON.stringify(body)});if(!r.ok)throw new Error('Upload failed: '+r.status);return r.json();}
function toB64(file){return new Promise((res,rej)=>{const fr=new FileReader();fr.onload=()=>{const b64=btoa(String.fromCharCode(...new Uint8Array(fr.result)));res(b64);};fr.onerror=rej;fr.readAsArrayBuffer(file);});}

async function nextIndex(token){try{const items=await listRoot(token);const nums=items.map(it=>it.name).map(n=>(n.match(/^gallery-(\d+)\./)||[])[1]).filter(Boolean).map(x=>parseInt(x,10));return (nums.length?Math.max(...nums):0)+1;}catch(e){return 1;}}

uploadBtn.addEventListener('click', async ()=>{
  try{
    if(adminKey.value.trim()!==ADMIN_PASS){alert('Wrong admin key');return;}
    if(!files.length){alert('Choose image(s)');return;}
    const token=ghToken.value.trim(); if(!token){alert('Paste your GitHub token');return;}
    statusEl.textContent='Uploading‚Ä¶'; statusEl.className='pill warn';
    let n=await nextIndex(token);
    const added=[];
    let manifest={images:[]}, sha=null;
    try{const r=await fetch('https://api.github.com/repos/shadowoverragusa/shadowoverragusa.github.io/contents/gallery.json?ref=main',{headers:headers(token)});if(r.ok){const j=await r.json();manifest=JSON.parse(atob(j.content));sha=j.sha;}}catch(e){}
    for(const f of files){
      const ext=(f.name.split('.').pop()||'jpg').toLowerCase();
      const name=`gallery-${n++}.${ext}`;
      const b64=await toB64(f);
      await putFile(name,b64,'Add image '+name,token);
      added.push(name);
      statusEl.textContent='Uploaded '+name; statusEl.className='pill ok';
    }
    manifest.images=(manifest.images||[]).concat(added);
    const manifestB64=btoa(unescape(encodeURIComponent(JSON.stringify(manifest,null,2))));
    await putFile('gallery.json',manifestB64,'Update gallery.json',token,sha);
    statusEl.textContent='Done: '+added.length+' file(s)'; statusEl.className='pill ok';
    alert('Upload complete. Refresh the page.');
  }catch(e){
    statusEl.textContent='Error: '+e.message; statusEl.className='pill err';
    alert(e.message);
  }
});
</script>
</body>
</html>
